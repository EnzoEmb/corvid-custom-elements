# Corvid Custom Dropdown

The Corvid Custom Dropdown is a Corvid Custom Element (Web Component) built to give more flexibility in creating dropdown elements for Corvid sites. This component is fully customizable to access your project’s needs.

[See this component in action on a live site](https://www.dropdown-custom-element.com/)

***Note***: This is an advanced level example, requiring understanding of HTML, CSS and Javascript.

***Note***: You can only use Custom Elements on Premium sites.

## Installation

1. Copy all the files under the “public” folder to the “Public” folder in corvid. <br/>
[(Read more on Corvid local site structure)](https://support.wix.com/en/article/corvid-local-site-project-structure)
2. Add a Custom Element on a Corvid Page. <br/>
 [(Read more about Custom Elements)](https://support.wix.com/en/article/corvid-about-custom-elements-8253009)
3. Open the **“Add”** menu.
4. Navigate to the **“Embed”** sub menu.
5. Select **“Custom Element”**.
6. Setup the Custom Element to use the repeater Corvid file.
7. Click Choose Source for the custom element (or setup, if the custom element was previously setup).
8. Select **“Corvid File”** as an option for **“add your script file with”**
9. Select the `dropdown.js` file from the list.
10. enter `dropdown-elem` as the tag name.
11. In your page code, initialize the custom repeater element *(see the code below)*:

```javascript
import {DropdownAPI} from 'public/dropdown-api';
import {renderDropdown, renderDropdownItem, css} from 'public/dropdown-design';

import wixData from 'wix-data';

$w.onReady(async function () {
	let dropdown = new DropdownAPI($w('#CustomElement1'), renderDropdown, renderDropdownItem);
	dropdown.css = css;

	let countries = await wixData
	.query("Countries")
	.find()
	.then(res => res.items.map(item => {
		return {
			title: item.title,
			flag: item.externalUrl
		}
	}));
	dropdown.data = countries;
});
```

## Database collection

This example uses a Database collection of countries. To add it, follow these steps:
1. On the **“Site Structure”** sidebar (on the left in your Editor), 
hover on **“Database”** in the bottom and click **“Add”** (+) icon.
2. Create a new database and name it “Countries”.
3. Your database needs to have only 2 obligatory fields: 
- `“title” (type: Text)` - a field for a country name;
- `“externalUrl” (type: Url)` - a field with the URL of country flag icon (in case you use hosted somewhere else icons, f.e. from Freepik and other resources).
You can also give this field another name (like “image”), make it of “Image” type and keep all icons inside your database.
4. Fill the database with data you’re going to use for your dropdown. 

You can find a great video on how to set up a Database collection [here](https://www.wix.com/corvid/tutorial/how-to-set-up-a-database-collection).

## The Dropdown API

The `Public/dropdown-api` module provides an API and SEO for the custom element.

#### Constructor
``` javascript
new DropdownAPI(elem: Element, globalTemplate: renderDropdown, itemTemplate: renderDropdownItem);
function RenderRepeater(itemsHtml: Array<String>): String;
function renderDropdownItem(item: Object): String;
```
 
The Dropdown API accepts the repeater custom element and two functions. 
- `itemTemplate` renders the HTML for a single item in the dropdown. 
It is called for each item in the data array.
- `globalTemplate` is a function that renders the repeater full HTML, that is used both for SEO and displaying the repeater itself.
The function accepts as a parameter an array of HTML fragments generated by calling the itemTemplate on each of the items in the data property.

#### Property css: `String`
A CSS string that is set as the style tag for the custom element.

#### Property data: `Array<Object>`                         
A property for the data to display in the dropdown. 
The data is assumed to be an array of objects, for each the dropdown calls the itemTemplate to generate the HTML for that item.

## The Dropdown Design
The `Public/dropdown-design` module stores css and html markup.
